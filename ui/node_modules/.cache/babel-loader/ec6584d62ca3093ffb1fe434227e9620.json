{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nagua\\\\Documents\\\\workouts\\\\rta\\\\src\\\\ui\\\\src\\\\components\\\\login\\\\login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport * as Constants from '../../constants';\nimport { Button, Form, Container, Row, Col, Jumbotron, Alert } from 'react-bootstrap';\nimport '../login/login.css';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      redirect: false,\n      username: \"\",\n      userrole: \"\",\n      isloggedin: null,\n      loginFailed: null\n    };\n\n    this.validateForm = () => {\n      return this.state.userrole.length > 0;\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      let loginReq = {\n        userrole: this.state.userrole\n      };\n      console.log(Constants.API_URL + \"Api/UserInfo/auth\");\n      setTimeout(() => {\n        axios({\n          method: \"post\",\n          url: Constants.API_URL + \"Api/UserInfo/auth\",\n          data: loginReq\n        }).then(resp => {\n          this.setState({\n            redirect: resp.data,\n            isloggedin: resp.data\n          });\n        }).catch(error => {\n          console.log(error);\n        });\n      }, 1000);\n    };\n  }\n\n  componentDidUpdate() {}\n\n  render() {\n    const {\n      redirect,\n      userrole,\n      isloggedin\n    } = this.state;\n\n    if (redirect) {\n      console.log(redirect);\n\n      if (userrole.toString().toLowerCase() === Constants.NORMAL) {\n        console.log(userrole);\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/adduser\",\n            state: {\n              userrole: userrole,\n              isloggedin: isloggedin\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 18\n          }\n        });\n      } else if (userrole.toString().toLowerCase() === Constants.ADMIN || userrole.toString().toLowerCase() === Constants.SUPER) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/user\",\n            state: {\n              userrole: userrole,\n              isloggedin: isloggedin\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 18\n          }\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    }, \"Login\")))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Jumbotron, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"userrole\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: this.state.userrole,\n      onChange: e => this.setState({\n        userrole: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 23\n      }\n    }, \"Select role\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 23\n      }\n    }, \"NormalUser\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 23\n      }\n    }, \"AdminUser\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 23\n      }\n    }, \"SuperUser\"))), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      disabled: !this.validateForm(),\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, \"Login\"))))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }, this.state.loginFailed !== null && !this.state.loginFailed && /*#__PURE__*/React.createElement(Alert, {\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 22\n      }\n    }, \"Invalid credentials\")))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/nagua/Documents/workouts/rta/src/ui/src/components/login/login.js"],"names":["React","Component","Redirect","axios","Constants","Button","Form","Container","Row","Col","Jumbotron","Alert","Login","state","redirect","username","userrole","isloggedin","loginFailed","validateForm","length","handleSubmit","event","preventDefault","loginReq","console","log","API_URL","setTimeout","method","url","data","then","resp","setState","catch","error","componentDidUpdate","render","toString","toLowerCase","NORMAL","pathname","ADMIN","SUPER","e","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport * as Constants from '../../constants';\r\nimport { Button, Form, Container, Row, Col, Jumbotron, Alert } from 'react-bootstrap';\r\nimport '../login/login.css';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    redirect: false,\r\n    username: \"\", \r\n    userrole: \"\",\r\n    isloggedin: null,\r\n    loginFailed: null\r\n  }\r\n\r\n  validateForm = () =>  {\r\n    return this.state.userrole.length > 0;\r\n  }\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    let loginReq = {\r\n      userrole: this.state.userrole\r\n    };\r\nconsole.log(Constants.API_URL + \"Api/UserInfo/auth\");\r\nsetTimeout(() => {\r\n    axios({\r\n      method: \"post\",\r\n      url: Constants.API_URL + \"Api/UserInfo/auth\",\r\n      data: loginReq\r\n    }).then(resp =>  {\r\n      this.setState({ redirect: resp.data, isloggedin: resp.data});\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n  }, 1000);\r\n  }\r\n\r\n  componentDidUpdate()\r\n  {\r\n\r\n  }\r\n\r\n  render () {\r\n    const { redirect, userrole, isloggedin } = this.state;\r\n   \r\n     if (redirect) {\r\n       console.log(redirect);\r\n        if(userrole.toString().toLowerCase() === Constants.NORMAL){\r\n          console.log(userrole);\r\n          return <Redirect \r\n          to={{\r\n                pathname: \"/adduser\",\r\n                state: { userrole: userrole, isloggedin: isloggedin }\r\n              }}\r\n          />;\r\n        }\r\n        else if(userrole.toString().toLowerCase() === Constants.ADMIN\r\n        || userrole.toString().toLowerCase() === Constants.SUPER){\r\n          return <Redirect\r\n          to={{\r\n            pathname: \"/user\",\r\n            state: { userrole: userrole, isloggedin: isloggedin }\r\n          }}\r\n          />;\r\n        }\r\n     }\r\n\r\n     return (\r\n      <div className=\"Login\">\r\n          <Container>\r\n            <Row>\r\n              <Col>\r\n                <h2><Form.Label>Login</Form.Label></h2>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Jumbotron>\r\n                  <form onSubmit={this.handleSubmit}>\r\n                    {/* <Form.Group controlId=\"username\">\r\n                      <Form.Control\r\n                        autoFocus\r\n                        type=\"text\"\r\n                        value={this.state.username}\r\n                        onChange={e => this.setState({username:e.target.value})}\r\n                        placeholder=\"Enter Username\" />\r\n                    </Form.Group> */}\r\n                    <Form.Group controlId=\"userrole\">\r\n                      <Form.Control as=\"select\" \r\n                      value={this.state.userrole}\r\n                      onChange={e => this.setState({userrole: e.target.value})}>\r\n                      <option>Select role</option>\r\n                      <option>NormalUser</option>\r\n                      <option>AdminUser</option>\r\n                      <option>SuperUser</option>\r\n                      </Form.Control>\r\n                    </Form.Group>\r\n                    <Button block disabled={!this.validateForm()} type=\"submit\">\r\n                      Login\r\n                    </Button>\r\n                  </form>\r\n                </Jumbotron>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n              {\r\n                    (this.state.loginFailed !== null && \r\n                      !this.state.loginFailed)&&\r\n                     <Alert variant=\"danger\">\r\n                         Invalid credentials\r\n                      </Alert>\r\n                  }\r\n              </Col>\r\n            </Row>\r\n          </Container>  \r\n      </div>\r\n    );\r\n  }\r\n} \r\n\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}